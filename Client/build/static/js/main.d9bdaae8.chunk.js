(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),s=(a(74),a(13)),i=a(14),o=a(20),u=a(19),d=a(21),h=(a(76),a(78),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-xl navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Kristi_the_coder"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExample06"}))}}]),t}(n.Component)),p=a(22),m=a.n(p),f=function(e){var t,a=function(e,t){var a=Object.keys(e).filter(function(e){return-1===t.indexOf(e)});return a.push("Delete"),a},n=function(t){e.dataHandler.deleteStudent(t).then(function(t){t.success&&e.dataHandler.getAll()})};return 0===e.data.length?(t=r.a.createElement("p",null,"Data is loading..."),e.dataHandler.getAll()):t=r.a.createElement("table",{className:"table table-bordered col-lg-12"},r.a.createElement("thead",null,function(e){var t=a(e.data[0],e.noDisplay);return r.a.createElement("tr",null,t.map(function(e){return r.a.createElement("th",{key:e},e)}))}(e)),r.a.createElement("tbody",null,function(t){var l=a(e.data[0],e.noDisplay);return t.map(function(e){return r.a.createElement("tr",{key:e._id},l.map(function(t){return"Delete"===t?r.a.createElement("td",{key:e._id+t},r.a.createElement(m.a,{onClick:function(){return n(e._id)},bsStyle:"danger"},"Delete")):r.a.createElement("td",{key:e._id+t},e[t])}))})}(e.data))),r.a.createElement("div",{className:"container col-lg-6 col-sm-10"},t)},b=a(67),E=a(8),v=a(68),y=a.n(v),j=a(29),O=a.n(j),g=a(30),k=a.n(g),S=a(44),w=a.n(S),x=a(23),C=a.n(x),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={FirstName:"",LastName:"",House:"Gryffindor"},a.handleInputChange=a.handleInputChange.bind(Object(E.a)(Object(E.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(Object(E.a)(a))),a.open=a.open.bind(Object(E.a)(Object(E.a)(a))),a.close=a.close.bind(Object(E.a)(Object(E.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"open",value:function(){this.setState({showModal:!0})}},{key:"close",value:function(){this.setState({showModal:!1})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.dataHandler.addStudent(this.state).then(function(e){e.success&&(t.close(),t.props.dataHandler.getAll())})}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(b.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{bsStyle:"primary",onClick:this.open},"Add Student"),r.a.createElement("div",null,r.a.createElement(C.a,{className:"modal-container",show:this.state.showModal,onHide:this.close,bsSize:"lg",backdrop:!1,animation:!1},r.a.createElement(C.a.Header,null,r.a.createElement(C.a.Title,null,"Add Student")),r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(C.a.Body,null,r.a.createElement(O.a,null,r.a.createElement(k.a,null,"First name:"),r.a.createElement(w.a,{onChange:this.handleInputChange,type:"text",name:"FirstName"})),r.a.createElement(O.a,null,r.a.createElement(k.a,null,"Last name:"),r.a.createElement(w.a,{onChange:this.handleInputChange,type:"text",name:"LastName"})),r.a.createElement(O.a,null,r.a.createElement(k.a,null,"House:"),r.a.createElement("select",{onChange:this.handleInputChange,type:"text",name:"House"},r.a.createElement("option",null,"Gryffindor"),r.a.createElement("option",null,"Slytherin"),r.a.createElement("option",null,"Ravenclaw"),r.a.createElement("option",null,"Hufflepuff")))),r.a.createElement(C.a.Footer,null,r.a.createElement(m.a,{onClick:this.close},"Close"),r.a.createElement(m.a,{onClick:this.handleSubmit,bsStyle:"primary"},"Save changes"))))))}}]),t}(n.Component),H=a(16),N=a.n(H),D=a(31),_=function(){function e(t){Object(s.a)(this,e),this.deleteStudent=function(){var e=Object(D.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({id:t}),e.next=3,fetch("/api/v1/deleteStudent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200===n.status){e.next=9;break}throw Error(r.message);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.addStudent=function(){var e=Object(D.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),e.next=3,fetch("/api/v1/addStudent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,200===n.status){e.next=9;break}throw Error(r.message);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.ApiGetAll=Object(D.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/getAll");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),this.props=t}return Object(i.a)(e,[{key:"getAll",value:function(){var e=this;this.ApiGetAll().then(function(t){return e.props.refresh(t)}).catch(function(e){return console.log(e)})}}]),e}(),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshData=function(e){a.setState({data:e}),console.log("refreshing data...")},a.dh=new _({refresh:a.refreshData}),a.state={data:[],noDisplay:["_id","__v"],dataHandler:a.dh},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App col-lg-12"},r.a.createElement(h,null),r.a.createElement(A,{dataHandler:this.state.dataHandler}),r.a.createElement(f,this.state))}}]),t}(n.Component);c.a.render(r.a.createElement(I,null),document.getElementById("root"))},69:function(e,t,a){e.exports=a(166)},74:function(e,t,a){},78:function(e,t,a){}},[[69,2,1]]]);
//# sourceMappingURL=main.d9bdaae8.chunk.js.map